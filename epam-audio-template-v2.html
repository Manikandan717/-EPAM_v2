<!doctype html>
<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Audio Recorder</title>
	<script
	src="https://code.jquery.com/jquery-3.4.1.min.js"
	integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	<script src="audio-epam-v2/audiodisplay.js"></script>
	<script src="audio-epam-v2/recorderjs/recorder.js"></script>
	<script src="audio-epam-v2/new1.js"></script>
	<style>
	canvas {
		display: inline-block;
		background: #cccccc;
		width: 100%;
		height: 100px;
	}
	#controls {
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: space-around;
		height: 20%;
		width: 100%;
	}
	.audio {
		width: 100%;
	}
	.hidden {
		display: none;
	}

	#title
	{
		font-size: 14px;
		color: #777;
	}

	#texttorec
	{
		border: 1px solid #cccccc;
		padding: 20px;
		font-size: 26px;
		margin-top: 10px;
		margin-bottom: 10px;
		border-radius: 5px;
	}
    #save{
        float: right
    }
    #alert{
        border-color: #d38e8e;
        background-color: #fff0f2;
        line-height: 1.6;
    }
	#done
	{
		font-size: 30px;
		line-height: 150px;
		text-align: center;
		color: #444;
	}
    #timer {
		font-size: 20px;
		color: #333;
		margin-top: 10px;
		text-align: center;
	}
	#start-record-btn, #pause-record-btn, #stop-record-btn, #recording-cont {
		display: none !important;}
	</style>
</head>
<body>
	<div id="mymodal" class="modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Modal title</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Modal body text goes here.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary">Save changes</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<main role="main">
		<div class="container-fluid">
			<div class="row">
				<div class="col-3 ctrlpanel hhidden-xs vh-100 overflow-auto pe-2 pb-2">
				Please complete your info:
				<form>
                    <div class="form-group">
						<label for="userId">Speaker Id</label>
						<input type="text" class="form-control" id="userId" aria-describedby="Enter your speaker id" placeholder="Enter your speaker id">
					</div>
					<div class="form-group">
						<label for="userName">Name</label>
						<input type="text" class="form-control" id="userName" aria-describedby="Enter your name" placeholder="Enter your name">
					</div>
					<div class="form-group">
						<label for="userGender">Gender</label>
						<select class="form-control" id="userGender">
							<option></option>
							<option>Male</option>
							<option>Female</option>
						</select>
					</div>
					<div class="form-group">
						<label for="userAge">Age</label>
						<input type="number" class="form-control" id="userAge" aria-describedby="Enter your age" placeholder="Enter your age">
					</div>
					<!-- <div class="form-group">
						<label for="userCountry">Country </label>
						<select class="form-control" id="userCountry" onchange="updateText()">
							<option>United States</option>
							<option>United Kingdom</option>
						</select>
					</div> -->
					<div class="form-group">
						<label for="proficiencyLevel">Proficiency Level</label>
						<select class="form-control" id="proficiencyLevel">
							<option disabled selected value="">Select your proficiency level</option>
							<option value="A1 (Beginner)">A1 (Beginner)</option>
							<option value="A2 (Elementary)">A2 (Elementary)</option>
							<option value="B1 (Intermediate)">B1 (Intermediate)</option>
							<option value="B1 (Intermediate)">B2 (Upper Intermediate)</option>
							<option value="C1 (Advanced)">C1 (Advanced)</option>
							<option value="C2 (Proficient)">C2 (Proficient)</option>
						</select>
					</div>
					<div class="form-group">
						<label for="nativeLanguage">Native Language</label>
						<input type="text" class="form-control" id="nativeLanguage" placeholder="Enter your native language">
					</div>
					<div class="form-group">
						<label for="userCountry">Country</label>
						<select class="form-control" id="userCountry" onchange="updateText()">
							<option value="">Select a country</option>
							<option value="en-US">en-US</option>
							<option value="en-UK">en-UK</option>
							<option value="ru-RU">ru-RU</option>
							<option value="hr-HR">hr-HR</option>
							<option value="sk-CZ">sk-CZ</option>
							<option value="sr-XK">sr-XK</option>
							<option value="sq-AL">sq-AL</option>
							<option value="cs-CZ">cs-CZ</option>
							<option value="sq-XK">sq-XK</option>
							<option value="hu-HU">hu-HU</option>
							<option value="uk-UA">uk-UA</option>
							<option value="sk-SK">sk-SK</option>
							<option value="hr-BA">hr-BA</option>
							<option value="de-AT">de-AT</option>
							<option value="de-DE">de-DE</option>
							<option value="ro-RO">ro-RO</option>
							<option value="sr-RS">sr-RS</option>
							<option value="sr-BA">sr-BA</option>
							<option value="sl-SI">sl-SI</option>
							<option value="sq-ME">sq-ME</option>
							<option value="bs-BA">bs-BA</option>
							<option value="bs-ME">bs-ME</option>
							<option value="pl-PL">pl-PL</option>
						</select>
					</div>
				</form>
                <button id="clearAllData" class="btn btn-danger">Reset</button>
				</div>
				<!-- <div class="col-8 imgdisplay">
					<div id="title"></div>
					<div id="subtitle"></div>
					<div id="texttorec">kindly select country first</div>
					<div id="done" class="hidden">Thank you!</div>
					<canvas id="analyser" class="hidden"></canvas>
					<canvas id="wavedisplay" class="hidden"></canvas>
					<div id="media"></div>
                    <div id="timer" class="hidden">00:00</div>
                    <audio id="audioPlayback" controls class="hidden"></audio>
					<button id="record" type="button" class="btn btn-primary" onclick="toggleRecording(this);">Start Recording</button>
					<button id="save" type="button" class="btn btn-info hidden" onclick="sendAudio()">Send Audio</button>
                    <br>
                    <br>  
                    <div class="alert mt-3 p-3 position-relative" role="alert" id="alert">
                        <div class="d-flex align-items-start">
                          <div>
                            <h6 class="fw-semibold">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="red" stroke="red" stroke-width="0.5" class="bi bi-exclamation-triangle me-2 mb-2 " viewBox="0 0 16 16">
                                    <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
                                    <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
                                  </svg>
                                <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
                              </svg>Important
                            </h6>
                            <p class="mb-0 px-3" id="alert">
								<b class="text-danger px-1">Mandatory Notice:</b> Record one sentence/question at a time, ensuring each is its own separate clip.<br>
                                Pause briefly before and after reading each sentence/question to allow for clean editing.<br>
                                <b class="text-danger px-1">No Repetition Within a Sentence:</b>
                                <ul>
                                    <li>If you make a mistake, stop and re-record the entire sentence/question.</li>
                                    <li>Do not try to restart the sentence halfway through.Tone and Clarity:</li>
                                    <li>Speak clearly and confidently, enunciating your words without over-exaggerating.</li>
                                    <li>Avoid mumbling, whispering, or speaking too loudly.</li>
                            </ul>
                            </p>
                          </div>
                        </div>
                      </div>

                </div> -->
				<div class="col-8">
					<div id="texttorec">Kindly select country first</div>
					<audio id="audioPlayback" controls class="w-100 mb-3 hidden"></audio>
					<button id="next" type="button" class="btn btn-primary" onclick="nextAudio()">Next</button>
					<div id="done" class="hidden">Thank you!</div>
				</div>
			</div>
		</div>
	</main>
</body>
<script>
const countryTexts = {
	"en-US": [
		{ id: "e9379ecf2b22416bd3c34adb358ce1f1", text: "How do I change my account's nickname?", audioUid: "3097e925748321f5e445ace69da3594a", audioS3Uri: "/AZURE/en-US/3097e925748321f5e445ace69da3594a.mp3" },
	],
	"en-UK": [
		{ id: "3eaf3f377cf638dcb8592b8619b735bf", text: "How do I change my account's nickname?", audioUid: "66840bc7f3d47acf1237e4f1eca4d426", audioS3Uri: "/AZURE/en-UK/66840bc7f3d47acf1237e4f1eca4d426.mp3" },
	]
};

let currentIndex = 0;

function updateText() {
	const selectedCountry = document.getElementById("userCountry").value;
	const displayDiv = document.getElementById("texttorec");
	const audio = document.getElementById("audioPlayback");

	currentIndex = 0;
	displayDiv.classList.remove("hidden");
	audio.classList.remove("hidden");
	document.getElementById("done").classList.add("hidden");

	if (selectedCountry && countryTexts[selectedCountry]?.length > 0) {
		displayText(selectedCountry);
	}
}

function displayText(country) {
	const displayDiv = document.getElementById("texttorec");
	const audio = document.getElementById("audioPlayback");

	if (currentIndex < countryTexts[country].length) {
		const currentItem = countryTexts[country][currentIndex];
		displayDiv.textContent = currentItem.text;
		audio.src = currentItem.audioS3Uri;
		audio.play();
	}
}

function nextAudio() {
	const selectedCountry = document.getElementById("userCountry").value;
	const displayDiv = document.getElementById("texttorec");
	const audio = document.getElementById("audioPlayback");

	if (selectedCountry && currentIndex < countryTexts[selectedCountry].length - 1) {
		currentIndex++;
		displayText(selectedCountry);
	} else {
		displayDiv.classList.add("hidden");
		audio.classList.add("hidden");
		document.getElementById("next").classList.add("hidden");
		document.getElementById("done").classList.remove("hidden");
	}
}
</script>
<!-- <script>

// var texts = [
// {id:16, text: "Others have tried to explain the phenomenon physically. "},
// {id:17, text: "Aristotle thought that the rainbow was caused by reflection of the sun's rays by the rain. "},
// {id:18, text: "Aristotle thought that the rainbow was caused by reflection of the sun's rays by the rain. "},
// {id:19, text: "Since then physicists have found that it is not reflection, but refraction by the raindrops which causes the rainbows. "},
// ];
var countryTexts = {
 "en-US": [      
	  { id: "e9379ecf2b22416bd3c34adb358ce1f1", text: "How do I change my account's nickname?", audioUid: "3097e925748321f5e445ace69da3594a",
    audioS3Uri: "/AZURE/en-US/3097e925748321f5e445ace69da3594a.mp3", },
     

	],

 "en-UK": [
  { "id": "3eaf3f377cf638dcb8592b8619b735bf", "text": "How do I change my account's nickname?", audioUid: "66840bc7f3d47acf1237e4f1eca4d426",
        audioS3Uri: "/AZURE/en-UK/66840bc7f3d47acf1237e4f1eca4d426.mp3", },
  ],
	
        };


// console.log(countryTexts.length);
var idLength = countryTexts;
// console.log(",,,,,,,,,,,,,,,,,,,,,",idLength);
// Loop texts array three times
// console.log("...............",texts);
countryTexts = countryTexts;
// console.log("...............",texts);
nextAudio();
var currentIndex = 0; // Track which text is being displayed

        function updateText() {
            var selectedCountry = document.getElementById("userCountry").value;
            var displayDiv = document.getElementById("texttorec");
            displayDiv.innerHTML = ""; // Clear previous text
            currentIndex = 0; // Reset index when country changes

            if (selectedCountry && countryTexts[selectedCountry].length > 0) {
                displayText(selectedCountry);
            }
        }

        function displayText(country) {
            var displayDiv = document.getElementById("texttorec");
            displayDiv.innerHTML = ""; // Clear previous text

            if (currentIndex < countryTexts[country].length) {
                var p = document.createElement("p");
                p.textContent = countryTexts[country][currentIndex].text;
                displayDiv.appendChild(p);
            }
        }

function nextAudio() {
    var selectedCountry = document.getElementById("userCountry").value;
    var displayDiv = document.getElementById("texttorec");

    if (selectedCountry && currentIndex < countryTexts[selectedCountry].length - 1) {
        currentIndex++;
        displayText(selectedCountry);
    } else if (selectedCountry && currentIndex === countryTexts[selectedCountry].length - 1) {
        // If we've reached the last text, hide #texttorec and #record
        $('#texttorec').hide();
        $('#record').hide();
		$('#alert').hide();

        // Optionally, show a message like "Thank you!" or something similar
        var doneDiv = document.getElementById("done");
        doneDiv.classList.remove("hidden"); // Make it visible
    }
}

</script> -->
</html>
